
# –ú–∞—à–∞ v2 - Telegram –ß–∞—Ç-–ë–æ—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ LLM



–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç Telegram-–±–æ—Ç–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `python-telegram-bot`. –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è —Ç–µ–∫—Å—Ç, –≥–æ–ª–æ—Å, –≤–∏–¥–µ–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã. –¢–∞–∫–∂–µ –æ–Ω –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ ChromaDB, Gemini,Mistral,Groq,together,openai —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ api, –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ OLLAMA.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥, —Ç–∞–∫–∏—Ö –∫–∞–∫ `/start`, `/help`, `/remember`, `/clear_my_history` –∏ –¥—Ä—É–≥–∏—Ö.
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö, –≥–æ–ª–æ—Å–æ–≤—ã—Ö, –≤–∏–¥–µ–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–æ—Ç–∞, –±–∞–Ω/—Ä–∞–∑–±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤.
- **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ChromaDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –∏ —Ñ–∞–∫—Ç–æ–≤.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò**:
  - **Gemini AI**: –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
  - Mistral, Together, groq, openai, ollama.
–º–æ–¥–µ–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏ llm
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite**: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞.
- **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤.
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8 –∏–ª–∏ –≤—ã—à–µ
- –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (—Å–æ–∑–¥–∞–π—Ç–µ —á–µ—Ä–µ–∑ [BotFather](https://core.telegram.org/bots#botfather))
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: API-–∫–ª—é—á–∏ –¥–ª—è Gemini AI –∏ Mistral AI

### –®–∞–≥–∏

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/ByteBudda/mashav2.git
   cd mashav2
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```env
   TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
   GEMINI_API_KEY=–≤–∞—à_gemini_api_key
   MISTRAL_API_KEY=–≤–∞—à_mistral_api_key
   ADMIN_IDS=123456789,987654321
   ```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python main.py
   ```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

- **`main.py`**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞.
- **`config.py`**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞.
- **`state.py`**: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –ø–∞–º—è—Ç–∏ –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—è –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–æ–≤ –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **`vector_db.py`**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –≤–µ–∫—Ç–æ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ChromaDB.
- **`bot_commands.py`**: –†–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
- **`handlers.py`**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã.
- **`utils.py`**: –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- **`documents_handler.py`**: –ß—Ç–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, DOCX, TXT –∏ –¥—Ä.).

---

## –ö–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

- `/start` - –ù–∞—á–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ç–æ–º.
- `/help` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.
- `/remember <—Ç–µ–∫—Å—Ç>` - –ó–∞–ø–æ–º–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
- `/clear_my_history` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞.
- `/setmyname <–∏–º—è>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –∏–º—è.
- `/reset_context` - –°–±—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/clear_history <ID>` - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≥—Ä—É–ø–ø—ã.
- `/set_default_style <—Å—Ç–∏–ª—å>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤.
- `/reset_style` - –°–±—Ä–æ—Å–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤.
- `/set_bot_name <–∏–º—è>` - –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è –±–æ—Ç–∞.
- `/set_activity <%>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö.
- `/ban <ID>` - –ó–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `/unban <ID>` - –†–∞–∑–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `/list_banned` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- `/list_admins` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
- `/get_log` - –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥-—Ñ–∞–π–ª –±–æ—Ç–∞.

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

- `python-telegram-bot`
- `pydub`
- `Pillow`
- `chromadb`
- `sentence-transformers`
- `transformers`
- `python-dotenv`
- `mistralai`
- `PyPDF2`
- `python-docx`

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ requirements.txt.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `TELEGRAM_BOT_TOKEN`: –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞.
- `GEMINI_API_KEY`: API-–∫–ª—é—á –¥–ª—è Gemini AI.
- `MISTRAL_API_KEY`: API-–∫–ª—é—á –¥–ª—è Mistral AI.
- `ADMIN_IDS`: –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

- `MAX_HISTORY`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏.
- `DEFAULT_STYLE`: –°—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- `HISTORY_TTL`: –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö.
- `CONTEXT_MAX_TOKENS`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ –ò–ò.

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª bot.log —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–æ—Ç–∞—Ü–∏–∏. –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ —Ñ–∞–π–ª–µ config.py.

---

## –í–∫–ª–∞–¥

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏ –∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –∏–ª–∏ pull requests. –ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –≤–∞—à–µ–º—É –≤–∫–ª–∞–¥—É!

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ LICENSE.

---

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot)
- [ChromaDB](https://www.trychroma.com/)
- [Gemini AI](https://aistudio.google.com/)
- [Mistral AI](https://mistral.ai/)
- [Sentence Transformers](https://www.sbert.net/)
---

*–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ú–∞—à–∏!* üòâ
